<!DOCTYPE html>
<html>
<head>
  <title>Capture your page</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <h1>Capture your page</h1>

    <form action="/process" method="POST" enctype="multipart/form-data">
      <label><br>Scan with camera:</label><br>
      <button type="submit" name="action" value="scan">Scan Now</button><br><br>

      <label><br>OR<br><br>Upload image:</label><br>
      <input type="file" name="file" id="file" accept="image/*"><br>
      <button type="submit" name="action" value="upload">Submit</button><br><br>
    </form>

    <div id="uploading" style="display: none; text-align: center; margin-top: 20px;">
      <p>Uploading your page...</p>
      <p>⏳ ⏳ ⏳</p>
    </div>

    <script>
      document.querySelector("form").addEventListener("submit", function(e) {
        const fileInput = document.getElementById("file");
        const action = document.activeElement.value;
        
        if (action === "upload" && fileInput.files.length > 0) {
          const file = fileInput.files[0];
          const maxSize = 5 * 1024 * 1024; // 5MB limit for upload
          
          if (file.size > maxSize) {
            alert("File is too large. Please choose a file smaller than 5MB.");
            e.preventDefault();
            return;
          }
        }
        
        document.getElementById("uploading").style.display = "block";
      });
    </script>
  </div>
</body>
</html>
